{
  "test_id": 1,
  "prompt": "Polen KSeF fatura kuyruğunda certificate_type column missing hatası",
  "timestamp": "2026-01-14T10:58:00Z",
  "status": "validated",
  "manual_analysis": {
    "decision_tree_path": {
      "step_1_keywords": {
        "found": ["Polen", "KSeF", "fatura", "kuyruk", "certificate_type", "column", "missing", "hatası"],
        "domain_indicators": {
          "database": ["column", "missing", "certificate_type"],
          "code": ["Polen", "KSeF", "fatura", "kuyruk"]
        },
        "decision": "code_specific + database (mixed domain)"
      },
      "step_2_intent": {
        "found": ["hatası"],
        "classification": "debug",
        "confidence": 0.95
      },
      "step_3_file_count": {
        "estimation": "5 files",
        "reasoning": "Polen KSeF module - moderate scope"
      },
      "step_4_context": {
        "required": ["serena.list_memories"],
        "query": "Polen related memories"
      },
      "step_5_execution": {
        "parallel_1": [
          "serena.list_memories",
          "serena.find_symbol PLInvoiceSchedulerService"
        ],
        "sequential_2": [
          "dbhub.search_objects poland_certificate"
        ],
        "sequential_3": [
          "serena.find_referencing_symbols certificate_type"
        ]
      }
    },
    "expected_output": {
      "domain": "code_specific",
      "intent": "debug",
      "keywords": ["Polen", "KSeF", "fatura", "certificate_type", "column", "missing", "hatası"],
      "confidence": 0.95,
      "recommended_tools": [
        {
          "tool": "serena",
          "action": "list_memories",
          "priority": 1,
          "reason": "Check for Polen-related context from previous sessions"
        },
        {
          "tool": "serena",
          "action": "find_symbol",
          "priority": 2,
          "reason": "Locate PLInvoiceSchedulerService and related certificate handling code",
          "parameters": {
            "name_path_pattern": "PLInvoiceSchedulerService",
            "depth": 1
          }
        },
        {
          "tool": "dbhub",
          "action": "search_objects",
          "priority": 3,
          "reason": "Verify poland_certificate table schema for certificate_type column",
          "parameters": {
            "object_type": "table",
            "pattern": "poland_certificate"
          }
        },
        {
          "tool": "serena",
          "action": "find_referencing_symbols",
          "priority": 4,
          "reason": "Find all code locations that reference certificate_type to assess impact",
          "parameters": {
            "name_path": "certificate_type"
          }
        }
      ],
      "execution_sequence": [
        {
          "step": 1,
          "parallel": ["serena.list_memories", "serena.find_symbol"],
          "description": "Gather historical context and locate current code implementation"
        },
        {
          "step": 2,
          "sequential": ["dbhub.search_objects"],
          "depends_on": [1],
          "description": "Verify database schema to confirm column existence/absence"
        },
        {
          "step": 3,
          "sequential": ["serena.find_referencing_symbols"],
          "depends_on": [2],
          "description": "Map all code references to understand scope of fix needed"
        }
      ],
      "skill_required": "/sc:troubleshoot",
      "complexity": "medium",
      "estimated_file_count": 5,
      "decision_path": "KEYWORD ANALYSIS: 'certificate_type', 'column', 'missing' indicate database concern, but 'Polen KSeF fatura kuyruk' are code domain markers → MIXED domain (code_specific + database). INTENT: 'hatası' clearly signals debug intent. FILE COUNT: Polen module scope suggests ~5 files. TOOLS: serena for code analysis + dbhub for schema verification. SEQUENCE: Parallel context gathering, then sequential schema check, then impact analysis."
    },
    "tool_precedence_check": {
      "scenario": "DB schema analysis",
      "options": ["dbhub.search_objects", "serena.search_for_pattern"],
      "selected": "dbhub.search_objects",
      "reason": "Specialized tool for database metadata, more efficient than text search"
    },
    "mandatory_protocol_compliance": {
      "pre_execution": {
        "memory_check": true,
        "decision_tree_followed": true,
        "precedence_matrix_consulted": true,
        "skill_detected": true,
        "todo_created": true
      },
      "execution": {
        "sequence_determined": true,
        "parallel_identified": true,
        "sequential_identified": true
      },
      "post_execution": {
        "synthesis_planned": true,
        "quality_check_planned": true
      }
    }
  },
  "validation_result": {
    "correct": true,
    "accuracy": 1.0,
    "notes": "Decision tree correctly identified mixed domain, appropriate debug intent, and optimal tool sequence. Tool precedence matrix properly applied. Mandatory protocol compliance confirmed."
  }
}
